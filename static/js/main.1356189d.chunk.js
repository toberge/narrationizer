(this.webpackJsonpnarrationizer=this.webpackJsonpnarrationizer||[]).push([[0],[,,,,,,,,,function(t,e,n){t.exports=n(17)},,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(8),i=n.n(a),c=(n(14),n(15),n(5)),s=n(1),u=n(2),l=n(3),f=n(6),h=n(4),d=function(t){var e=new Map;return t.forEach((function(t){return e.set(t,!0)})),e},m=[d(["sleep","wait","die"]),d(["go","walk","run"]),d(["up","down","left","right","north","south","east","west","door","back"]),d(["eat","open","pick up","take","inspect","look at","throw","stroke"]),d(["door","key","exit","two furry dice"])],p=["singular action","directional action","direction","object action","object"],v=function(t){for(var e=0;e<m.length;e++)if(m[e].get(t))return e;return-1};function b(t){function e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,r=Object(h.a)(t);if(e()){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var y=function(){function t(e){Object(s.a)(this,t),this.word=void 0,this.word=e}return Object(u.a)(t,[{key:"toString",value:function(){return this.constructor.name+" "+this.word}}]),t}(),g=function(t){Object(l.a)(n,t);var e=b(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return n}(y),w=function(t){Object(l.a)(n,t);var e=b(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"perform",value:function(){return"You will now ".concat(this.word)}}]),n}(y),k=function(t){Object(l.a)(n,t);var e=b(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"perform",value:function(t){return"You wanna ".concat(this.word," to the ").concat(t.word," & it is fine.")}}]),n}(g),j=function(t){Object(l.a)(n,t);var e=b(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return n}(y),O=function(t){Object(l.a)(n,t);var e=b(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"perform",value:function(t){return"You ".concat(this.word," the ").concat(t.word," (somehow)")}}]),n}(g),R=function(t){Object(l.a)(n,t);var e=b(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return n}(y),E=function(t,e){switch(e){case 0:return new w(t);case 1:return new k(t);case 2:return new j(t);case 3:return new O(t);case 4:return new R(t);default:return new w("roflmao something went wrong")}},x=[[1,2,-1,3,-1,-1],[-1,-1,-1,-1,-1,-2],[-1,-1,1,-1,-1,-1],[-1,-1,-1,-1,1,-1]];n(16);var S=function(t){Object(l.a)(n,t);var e=function(t){function e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,r=Object(h.a)(t);if(e()){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}(n);function n(){var t;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).bottomRef=o.a.createRef(),t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.bottomRef.current&&this.bottomRef.current.scrollIntoView({behavior:"smooth"})}},{key:"componentDidUpdate",value:function(t,e,n){this.bottomRef.current&&this.bottomRef.current.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){return o.a.createElement("div",{id:"log"},this.props.text.map((function(t,e){return o.a.createElement("p",{key:e},t)})),o.a.createElement("div",{ref:this.bottomRef}))}}]),n}(o.a.Component),C=function t(e){var n=e.currentRoom,r=e.inventory,o=void 0===r?[]:r;Object(s.a)(this,t),this.currentRoom=void 0,this.inventory=void 0,this.currentRoom=n,this.inventory=o},D=function t(e){var n=this,r=e.name,o=e.description,a=e.items,i=void 0===a?[]:a,u=e.paths,l=void 0===u?[]:u;Object(s.a)(this,t),this.name=void 0,this.description=void 0,this.items=void 0,this.paths=void 0,this.find=function(t){return n.items.find((function(e){return e.name===t||e.aliases.indexOf(t)>-1}))},this.explore=function(t){return n.paths.find((function(e){return e.aliases.indexOf(t)>-1}))},this.enter=function(){return[n.description,"It holds:"].concat(Object(c.a)(n.items.map((function(t){return t.description}))))},this.name=r,this.description=o,this.items=i,this.paths=l},Y=function t(e){var n=this,r=e.name,o=(e.aliases,e.description),a=e.actions;Object(s.a)(this,t),this.name=void 0,this.aliases=void 0,this.description=void 0,this.quantity=1,this.actions=new Map([["inspect",function(){return n.description}],["look at",function(){return n.description}]]),this.perform=function(t){var e=n.actions.get(t);return e?e():"Cannot ".concat(t," this ").concat(n.name)},this.name=r,this.aliases=[],this.description=o;var i=!0,c=!1,u=void 0;try{for(var l,f=a[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var h=l.value,d=h.aliases,m=h.action;m.bind(this);var p=!0,v=!1,b=void 0;try{for(var y,g=d[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var w=y.value;this.actions.set(w,m)}}catch(k){v=!0,b=k}finally{try{p||null==g.return||g.return()}finally{if(v)throw b}}}}catch(k){c=!0,u=k}finally{try{i||null==f.return||f.return()}finally{if(c)throw u}}},M=function(){function t(e){var n=e.from,r=e.to,o=e.actions,a=e.aliases,i=e.description,c=e.blocked;Object(s.a)(this,t),this.from=void 0,this.to=void 0,this._blocked=void 0,this.description=void 0,this.aliases=void 0,this.actions=void 0,this.from=n,this.to=r,this.aliases=a,this.description=i,this._blocked=c||!1,this.actions=o}return Object(u.a)(t,[{key:"blocked",set:function(t){this._blocked=t},get:function(){return this._blocked}}]),t}(),I=function(){function t(){Object(s.a)(this,t)}return Object(u.a)(t,null,[{key:"loadCampaign",value:function(t){var e=new Y({name:"key",aliases:[],description:"a rusted key",actions:[{aliases:["eat"],action:function(){return"You get a really bad feeling about this."}},{aliases:["pick up"],action:function(){return"It stows away nicely."}}]}),n=new D({name:"the room",description:"Dry air, murky gray concrete walls, a flickering light bulb hanging from the ceiling... This place makes you feel uncomfortable.",items:[e]}),r=new D({name:"long hallway",description:"Speckles of dust dance in the light of a solitary lamp. The hallway extends far into the distance, leaving you unsure about your very being.",paths:[]});return n.paths.push(new M({from:n,to:r,description:"You enter a long, murky hallway.",actions:["enter","go through"],aliases:["door"]})),r.paths.push(new M({from:r,to:n,actions:["enter","go through"],description:"You leave the hallway and go back.",aliases:["door","back"]})),new C({currentRoom:n,inventory:[new Y({name:"long thread",aliases:["thread"],description:"A long, thin thread of white silk",actions:[]})]})}}]),t}();var T=function(t){var e=t.onChange,n=t.onSubmit;return o.a.createElement("fieldset",null,o.a.createElement("legend",null,"hello pls tell me wat to do"),"Command: ",o.a.createElement("input",{type:"text",onChange:function(t){return e(t.target.value)}}),o.a.createElement("input",{type:"button",onClick:n,value:"clickety click"}))},_=function(t){Object(l.a)(n,t);var e=function(t){function e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}return function(){var n,r=Object(h.a)(t);if(e()){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).state={command:"",feedback:[],gameState:I.loadCampaign("test")},r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({feedback:["this is the first line of the log",'try something like "go left", "pick up key" or "open door"',"You're standing in a room"].concat(Object(c.a)(this.state.gameState.currentRoom.enter()))})}},{key:"getThatMessage",value:function(){var t=function(t){var e=[];e.push(0);for(var n=t.trim().toLowerCase().split(" "),r=[],o=0,a=!1,i=!1,c=0;!a&&!i;){if(-1===c){console.error("reached error state; command did not match syntax"),a=!0;break}if(o===n.length){-2===x[c][x[0].length-1]?i=!0:a=!0;break}for(var s=-1,u=o+1,l="";s<0&&u<=n.length;)l=n.slice(o,u).reduce((function(t,e){return"".concat(t," ").concat(e)})),s=v(l),u++;if(o=u-1,console.log(l),u===n.length+1&&s<0){console.error("lexical lookup failed, invalid command!"),a=!0;break}e.push(l),e.push(p[s]),r.push(E(l,s)),console.log("was in state",c),c=x[c][s],console.log("state:",c,"lookahead:",s),e.push(c)}return a?(console.log("damn invalid stuff..."),null):(console.log("is valid"),console.log(e),r)}(this.state.command);return t?function(t,e){if(1===t.length){var n=t[0];return n instanceof w?[n.perform()]:["wtf"]}if(2===t.length){var r=t[0],o=t[1];if(r instanceof O&&o instanceof R){var a=e.currentRoom.find(o.word),i="There is no ".concat(o.word," around you.");return a&&(i=a.perform(r.word)),[r.perform(o),i]}if(r instanceof k&&o instanceof j){var s=e.currentRoom.explore(o.word);return console.log("oh yes",s),s?(e.currentRoom=s.to,[r.perform(o),s.description||"to somewhere"].concat(Object(c.a)(s.to.enter()))):["there is nothing in that direction"]}return["no viable 2-phrase action"]}return["not an accepted command stack size"]}(t,this.state.gameState):["invalid command"]}},{key:"render",value:function(){var t=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(S,{text:this.state.feedback}),o.a.createElement(T,{onChange:function(e){return t.setState({command:e})},onSubmit:function(){return t.setState({feedback:[].concat(Object(c.a)(t.state.feedback),Object(c.a)(t.getThatMessage()))})}}))}}]),n}(o.a.Component),z=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",null,o.a.createElement("h1",null,"hi there")),o.a.createElement("main",null,o.a.createElement(_,null)),o.a.createElement("footer",null,o.a.createElement("p",null,o.a.createElement("small",null,"a friendly reminder that this is ",o.a.createElement("strong",null,"not in any way")," finished"),o.a.createElement("br",null),o.a.createElement("small",null,"please be kind to my creation"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[9,1,2]]]);
//# sourceMappingURL=main.1356189d.chunk.js.map