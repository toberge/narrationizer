(this.webpackJsonpnarrationizer=this.webpackJsonpnarrationizer||[]).push([[0],[,,,,,,,,,function(t,e,n){t.exports=n(17)},,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(8),i=n.n(o),c=(n(14),n(15),n(6)),s=n(1),u=n(2),l=n(4),h=n(3),f=n(5),m=function(t){var e=new Map;return t.forEach((function(t){return e.set(t,!0)})),e},d=[m(["sleep","wait","die"]),m(["go","walk","run"]),m(["up","down","left","right","north","south","east","west"]),m(["eat","open","pick up","take","inspect","look at","throw","stroke"]),m(["door","key","exit","two furry dice"])],p=["singular action","directional action","direction","object action","object"],b=function(t){for(var e=0;e<d.length;e++)if(d[e].get(t))return e;return-1},v=function(){function t(e){Object(s.a)(this,t),this.word=void 0,this.word=e}return Object(u.a)(t,[{key:"toString",value:function(){return this.constructor.name+" "+this.word}}]),t}(),y=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),e}(v),w=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(u.a)(e,[{key:"perform",value:function(){return"You will now ".concat(this.word)}}]),e}(v),g=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(u.a)(e,[{key:"perform",value:function(t){return"You wanna ".concat(this.word," to the ").concat(t.word," & it is fine.")}}]),e}(y),j=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),e}(v),O=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(u.a)(e,[{key:"perform",value:function(t){return"You ".concat(this.word," the ").concat(t.word," (somehow)")}}]),e}(y),k=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),e}(v),E=function(t,e){switch(e){case 0:return new w(t);case 1:return new g(t);case 2:return new j(t);case 3:return new O(t);case 4:return new k(t);default:return new w("roflmao something went wrong")}},R=[[1,2,-1,3,-1,-1],[-1,-1,-1,-1,-1,-2],[-1,-1,1,-1,-1,-1],[-1,-1,-1,-1,1,-1]],C=(n(16),function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(o)))).bottomRef=r.a.createRef(),n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.bottomRef.current&&this.bottomRef.current.scrollIntoView({behavior:"smooth"})}},{key:"componentDidUpdate",value:function(t,e,n){this.bottomRef.current&&this.bottomRef.current.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){return r.a.createElement("div",{id:"log"},this.props.text.map((function(t,e){return r.a.createElement("p",{key:e},t)})),r.a.createElement("div",{ref:this.bottomRef}))}}]),e}(r.a.Component)),S=function t(e){var n=e.currentRoom,a=e.inventory,r=void 0===a?[]:a;Object(s.a)(this,t),this.currentRoom=void 0,this.inventory=void 0,this.currentRoom=n,this.inventory=r},x=function t(e){var n=this,a=e.name,r=e.description,o=e.items,i=void 0===o?[]:o;Object(s.a)(this,t),this.name=void 0,this.description=void 0,this.items=void 0,this.find=function(t){return n.items.find((function(e){return e.name===t||e.aliases.indexOf(t)>-1}))},this.enter=function(){return[n.description,"It holds:"].concat(Object(c.a)(n.items.map((function(t){return t.description}))))},this.name=a,this.description=r,this.items=i},M=function t(e){var n=this,a=e.name,r=(e.aliases,e.description),o=e.actions;Object(s.a)(this,t),this.name=void 0,this.aliases=void 0,this.description=void 0,this.quantity=1,this.actions=new Map([["inspect",function(){return n.description}],["look at",function(){return n.description}]]),this.perform=function(t){var e=n.actions.get(t);return e?e():"Cannot ".concat(t," this ").concat(n.name)},this.name=a,this.aliases=[],this.description=r;var i=!0,c=!1,u=void 0;try{for(var l,h=o[Symbol.iterator]();!(i=(l=h.next()).done);i=!0){var f=l.value,m=f.aliases,d=f.action;d.bind(this);var p=!0,b=!1,v=void 0;try{for(var y,w=m[Symbol.iterator]();!(p=(y=w.next()).done);p=!0){var g=y.value;this.actions.set(g,d)}}catch(j){b=!0,v=j}finally{try{p||null==w.return||w.return()}finally{if(b)throw v}}}}catch(j){c=!0,u=j}finally{try{i||null==h.return||h.return()}finally{if(c)throw u}}},I=function(){function t(){Object(s.a)(this,t)}return Object(u.a)(t,null,[{key:"loadCampaign",value:function(t){var e=new M({name:"key",aliases:[],description:"a rusted key",actions:[{aliases:["eat"],action:function(){return"You get a really bad feeling about this."}},{aliases:["pick up"],action:function(){return"It stows away nicely."}}]}),n=new x({name:"the room",description:"Dry air, murky gray concrete walls, a flickering light bulb hanging from the ceiling... This place makes you feel uncomfortable.",items:[e]});return new S({currentRoom:n,inventory:[]})}}]),t}(),Y=function(t){var e=t.onChange,n=t.onSubmit;return r.a.createElement("fieldset",null,r.a.createElement("legend",null,"hello pls tell me wat to do"),"Command: ",r.a.createElement("input",{type:"text",onChange:function(t){return e(t.target.value)}}),r.a.createElement("input",{type:"button",onClick:n,value:"clickety click"}))},D=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(h.a)(e).call(this,t))).state={command:"",feedback:[],gameState:I.loadCampaign("test")},n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.setState({feedback:["this is the first line of the log",'try something like "go left", "pick up key" or "open door"',"You're standing in a room"].concat(Object(c.a)(this.state.gameState.currentRoom.enter()))})}},{key:"getThatMessage",value:function(){var t=function(t){var e=[];e.push(0);for(var n=t.trim().split(" "),a=[],r=0,o=!1,i=!1,c=0;!o&&!i;){if(-1===c){console.error("reached error state; command did not match syntax"),o=!0;break}if(r===n.length){-2===R[c][R[0].length-1]?i=!0:o=!0;break}for(var s=-1,u=r+1,l="";s<0&&u<=n.length;)l=n.slice(r,u).reduce((function(t,e){return"".concat(t," ").concat(e)})),s=b(l.toLowerCase()),u++;if(r=u-1,console.log(l),u===n.length+1&&s<0){console.error("lexical lookup failed, invalid command!"),o=!0;break}e.push(l),e.push(p[s]),a.push(E(l,s)),console.log("was in state",c),c=R[c][s],console.log("state:",c,"lookahead:",s),e.push(c)}return o?(console.log("damn invalid stuff..."),null):(console.log("is valid"),console.log(e),a)}(this.state.command);return t?function(t,e){if(1===t.length){var n=t[0];return n instanceof w?[n.perform()]:["wtf"]}if(2===t.length){var a=t[0],r=t[1];if(a instanceof O&&r instanceof k){var o=e.currentRoom.find(r.word),i="There is no ".concat(r.word," around you.");return o&&(i=o.perform(a.word)),[a.perform(r),i]}return a instanceof g&&r instanceof j?[a.perform(r)]:["no viable 2-phrase action"]}return["not an accepted command stack size"]}(t,this.state.gameState):["invalid command"]}},{key:"render",value:function(){var t=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{text:this.state.feedback}),r.a.createElement(Y,{onChange:function(e){return t.setState({command:e})},onSubmit:function(){return t.setState({feedback:[].concat(Object(c.a)(t.state.feedback),Object(c.a)(t.getThatMessage()))})}}))}}]),e}(r.a.Component),T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h1",null,"hi there")),r.a.createElement("main",null,r.a.createElement(D,null)),r.a.createElement("footer",null,r.a.createElement("p",null,r.a.createElement("small",null,"a friendly reminder that this is ",r.a.createElement("strong",null,"not in any way")," finished"),r.a.createElement("br",null),r.a.createElement("small",null,"please be kind to my creation"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[9,1,2]]]);
//# sourceMappingURL=main.ce7a909a.chunk.js.map