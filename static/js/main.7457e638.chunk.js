(this.webpackJsonpnarrationizer=this.webpackJsonpnarrationizer||[]).push([[0],[,,,,,,,,,function(t,e,n){t.exports=n(17)},,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),i=n(8),r=n.n(i),c=(n(14),n(15),n(6)),s=n(1),u=n(2),l=n(4),h=n(3),f=n(5),d=function(t){var e=new Map;return t.forEach((function(t){return e.set(t,!0)})),e},m=[d(["sleep","wait","die"]),d(["go","walk","run"]),d(["up","down","left","right","north","south","east","west","door","back"]),d(["eat","open","pick up","take","inspect","look at","throw","stroke"]),d(["door","key","exit","two furry dice"])],p=["singular action","directional action","direction","object action","object"],b=function(t){for(var e=0;e<m.length;e++)if(m[e].get(t))return e;return-1},v=function(){function t(e){Object(s.a)(this,t),this.word=void 0,this.word=e}return Object(u.a)(t,[{key:"toString",value:function(){return this.constructor.name+" "+this.word}}]),t}(),g=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),e}(v),y=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(u.a)(e,[{key:"perform",value:function(){return"You will now ".concat(this.word)}}]),e}(v),w=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(u.a)(e,[{key:"perform",value:function(t){return"You wanna ".concat(this.word," to the ").concat(t.word," & it is fine.")}}]),e}(g),k=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),e}(v),j=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(u.a)(e,[{key:"perform",value:function(t){return"You ".concat(this.word," the ").concat(t.word," (somehow)")}}]),e}(g),O=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(h.a)(e).apply(this,arguments))}return Object(f.a)(e,t),e}(v),E=function(t,e){switch(e){case 0:return new y(t);case 1:return new w(t);case 2:return new k(t);case 3:return new j(t);case 4:return new O(t);default:return new y("roflmao something went wrong")}},R=[[1,2,-1,3,-1,-1],[-1,-1,-1,-1,-1,-2],[-1,-1,1,-1,-1,-1],[-1,-1,-1,-1,1,-1]],x=(n(16),function(t){function e(){var t,n;Object(s.a)(this,e);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(i)))).bottomRef=a.a.createRef(),n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.bottomRef.current&&this.bottomRef.current.scrollIntoView({behavior:"smooth"})}},{key:"componentDidUpdate",value:function(t,e,n){this.bottomRef.current&&this.bottomRef.current.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){return a.a.createElement("div",{id:"log"},this.props.text.map((function(t,e){return a.a.createElement("p",{key:e},t)})),a.a.createElement("div",{ref:this.bottomRef}))}}]),e}(a.a.Component)),S=function t(e){var n=e.currentRoom,o=e.inventory,a=void 0===o?[]:o;Object(s.a)(this,t),this.currentRoom=void 0,this.inventory=void 0,this.currentRoom=n,this.inventory=a},C=function t(e){var n=this,o=e.name,a=e.description,i=e.items,r=void 0===i?[]:i,u=e.paths,l=void 0===u?[]:u;Object(s.a)(this,t),this.name=void 0,this.description=void 0,this.items=void 0,this.paths=void 0,this.find=function(t){return n.items.find((function(e){return e.name===t||e.aliases.indexOf(t)>-1}))},this.explore=function(t){return n.paths.find((function(e){return e.aliases.indexOf(t)>-1}))},this.enter=function(){return[n.description,"It holds:"].concat(Object(c.a)(n.items.map((function(t){return t.description}))))},this.name=o,this.description=a,this.items=r,this.paths=l},Y=function t(e){var n=this,o=e.name,a=(e.aliases,e.description),i=e.actions;Object(s.a)(this,t),this.name=void 0,this.aliases=void 0,this.description=void 0,this.quantity=1,this.actions=new Map([["inspect",function(){return n.description}],["look at",function(){return n.description}]]),this.perform=function(t){var e=n.actions.get(t);return e?e():"Cannot ".concat(t," this ").concat(n.name)},this.name=o,this.aliases=[],this.description=a;var r=!0,c=!1,u=void 0;try{for(var l,h=i[Symbol.iterator]();!(r=(l=h.next()).done);r=!0){var f=l.value,d=f.aliases,m=f.action;m.bind(this);var p=!0,b=!1,v=void 0;try{for(var g,y=d[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var w=g.value;this.actions.set(w,m)}}catch(k){b=!0,v=k}finally{try{p||null==y.return||y.return()}finally{if(b)throw v}}}}catch(k){c=!0,u=k}finally{try{r||null==h.return||h.return()}finally{if(c)throw u}}},M=function(){function t(e){var n=e.from,o=e.to,a=e.actions,i=e.aliases,r=e.description,c=e.blocked;Object(s.a)(this,t),this.from=void 0,this.to=void 0,this._blocked=void 0,this.description=void 0,this.aliases=void 0,this.actions=void 0,this.from=n,this.to=o,this.aliases=i,this.description=r,this._blocked=c||!1,this.actions=a}return Object(u.a)(t,[{key:"blocked",set:function(t){this._blocked=t},get:function(){return this._blocked}}]),t}(),I=function(){function t(){Object(s.a)(this,t)}return Object(u.a)(t,null,[{key:"loadCampaign",value:function(t){var e=new Y({name:"key",aliases:[],description:"a rusted key",actions:[{aliases:["eat"],action:function(){return"You get a really bad feeling about this."}},{aliases:["pick up"],action:function(){return"It stows away nicely."}}]}),n=new C({name:"the room",description:"Dry air, murky gray concrete walls, a flickering light bulb hanging from the ceiling... This place makes you feel uncomfortable.",items:[e]}),o=new C({name:"long hallway",description:"Speckles of dust dance in the light of a solitary lamp. The hallway extends far into the distance, leaving you unsure about your very being.",paths:[]});return n.paths.push(new M({from:n,to:o,description:"You enter a long, murky hallway.",actions:["enter","go through"],aliases:["door"]})),o.paths.push(new M({from:o,to:n,actions:["enter","go through"],description:"You leave the hallway and go back.",aliases:["door","back"]})),new S({currentRoom:n,inventory:[new Y({name:"long thread",aliases:["thread"],description:"A long, thin thread of white silk",actions:[]})]})}}]),t}(),T=function(t){var e=t.onChange,n=t.onSubmit;return a.a.createElement("fieldset",null,a.a.createElement("legend",null,"hello pls tell me wat to do"),"Command: ",a.a.createElement("input",{type:"text",onChange:function(t){return e(t.target.value)}}),a.a.createElement("input",{type:"button",onClick:n,value:"clickety click"}))},D=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(h.a)(e).call(this,t))).state={command:"",feedback:[],gameState:I.loadCampaign("test")},n}return Object(f.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.setState({feedback:["this is the first line of the log",'try something like "go left", "pick up key" or "open door"',"You're standing in a room"].concat(Object(c.a)(this.state.gameState.currentRoom.enter()))})}},{key:"getThatMessage",value:function(){var t=function(t){var e=[];e.push(0);for(var n=t.trim().toLowerCase().split(" "),o=[],a=0,i=!1,r=!1,c=0;!i&&!r;){if(-1===c){console.error("reached error state; command did not match syntax"),i=!0;break}if(a===n.length){-2===R[c][R[0].length-1]?r=!0:i=!0;break}for(var s=-1,u=a+1,l="";s<0&&u<=n.length;)l=n.slice(a,u).reduce((function(t,e){return"".concat(t," ").concat(e)})),s=b(l),u++;if(a=u-1,console.log(l),u===n.length+1&&s<0){console.error("lexical lookup failed, invalid command!"),i=!0;break}e.push(l),e.push(p[s]),o.push(E(l,s)),console.log("was in state",c),c=R[c][s],console.log("state:",c,"lookahead:",s),e.push(c)}return i?(console.log("damn invalid stuff..."),null):(console.log("is valid"),console.log(e),o)}(this.state.command);return t?function(t,e){if(1===t.length){var n=t[0];return n instanceof y?[n.perform()]:["wtf"]}if(2===t.length){var o=t[0],a=t[1];if(o instanceof j&&a instanceof O){var i=e.currentRoom.find(a.word),r="There is no ".concat(a.word," around you.");return i&&(r=i.perform(o.word)),[o.perform(a),r]}if(o instanceof w&&a instanceof k){var s=e.currentRoom.explore(a.word);return console.log("oh yes",s),s?(e.currentRoom=s.to,[o.perform(a),s.description||"to somewhere"].concat(Object(c.a)(s.to.enter()))):["there is nothing in that direction"]}return["no viable 2-phrase action"]}return["not an accepted command stack size"]}(t,this.state.gameState):["invalid command"]}},{key:"render",value:function(){var t=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement(x,{text:this.state.feedback}),a.a.createElement(T,{onChange:function(e){return t.setState({command:e})},onSubmit:function(){return t.setState({feedback:[].concat(Object(c.a)(t.state.feedback),Object(c.a)(t.getThatMessage()))})}}))}}]),e}(a.a.Component),_=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("header",null,a.a.createElement("h1",null,"hi there")),a.a.createElement("main",null,a.a.createElement(D,null)),a.a.createElement("footer",null,a.a.createElement("p",null,a.a.createElement("small",null,"a friendly reminder that this is ",a.a.createElement("strong",null,"not in any way")," finished"),a.a.createElement("br",null),a.a.createElement("small",null,"please be kind to my creation"))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[9,1,2]]]);
//# sourceMappingURL=main.7457e638.chunk.js.map